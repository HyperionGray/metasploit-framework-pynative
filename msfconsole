#!/usr/bin/env python3
# -*- coding: utf-8 -*-

"""
Metasploit Framework Console - PyNative Version

This user interface provides users with a command console interface to the
framework. This is the Python-native implementation.

Converted from Ruby msfconsole script - Ruby will be deleted soon.
"""

import sys
import os
from pathlib import Path


def main():
    """Main entry point for msfconsole."""
    
    # Check if user is in MSF environment
    in_msf_env = os.environ.get('MSF_PYTHON_MODE') == '1'
    
    # Show guidance message
    if not os.environ.get('MSF_QUIET') and '-q' not in sys.argv and '--quiet' not in sys.argv:
        print("\n" + "="*70)
        print("  üêç Metasploit Framework - PyNative")
        print("="*70)
        
        if not in_msf_env:
            print("\n  ‚ö†Ô∏è  RECOMMENDED: Use the MSF environment activation method")
            print("\n  For the best experience, activate the MSF environment first:")
            print("\n    $ source msfrc")
            print("\n  This gives you a virtualenv-like experience with:")
            print("    ‚úÖ All MSF commands available in your shell")
            print("    ‚úÖ Python-native module execution")
            print("    ‚úÖ Easy access to transpiler tools")
            print("    ‚úÖ Proper environment variables configured")
            print("\n  Then use these commands:")
            print("    msf_console    - Start Python-enhanced console")
            print("    msf_venom      - Payload generator")
            print("    msf_exploit    - Quick exploit launcher")
            print("    msf_search     - Search modules")
            print("    msf_info       - Show environment info")
            print("\n  To deactivate: msf_deactivate")
            print("\n" + "="*70)
            print("\n  Traditional msfconsole is being phased out.")
            print("  Use 'source msfrc' for the modern Python-native experience!")
            print("\n" + "="*70 + "\n")
            sys.exit(0)
        else:
            print("  Running from MSF environment (activated via 'source msfrc')")
            print("  This is the Python-native Metasploit Framework!")
            print("")
            print("  For module usage:")
            print("    python3 modules/exploits/path/to/exploit.py --help")
            print("="*70 + "\n")
    
    # TODO: Implement full Python console functionality
    print("üêç PyNative Metasploit Framework Console")
    print("Console implementation in progress...")
    print("Use msf_console (from 'source msfrc') for enhanced features.")


if __name__ == "__main__":
    try:
        main()
    except KeyboardInterrupt:
        print("\nAborting...")
        sys.exit(1)
