#!/usr/bin/env python3
# -*- coding: utf-8 -*-

"""
Metasploit Framework Console - PyNative Version

This user interface provides users with a command console interface to the
framework. This is the Python-native implementation.

Converted from Ruby msfconsole script - Ruby will be deleted soon.
"""

import sys
import os
from pathlib import Path


def main():
    """Main entry point for msfconsole."""
    
    # Check if MSF environment is active
    msf_env_active = os.environ.get('MSF_PYTHON_MODE') == '1'
    
    if not msf_env_active and not os.environ.get('MSF_QUIET') and '-q' not in sys.argv and '--quiet' not in sys.argv:
        print("\n" + "="*70)
        print("  üêç Metasploit Framework - Enhanced Experience Available!")
        print("="*70)
        print("  You're running msfconsole directly, but we recommend our")
        print("  enhanced shell environment for the best MSF experience!")
        print("")
        print("  üöÄ RECOMMENDED: Activate MSF Environment")
        print("     source msfrc")
        print("     msf_console    # Enhanced Python console")
        print("     msf_info       # See all available commands")
        print("")
        print("  Benefits of 'source msfrc':")
        print("  ‚úÖ All MSF commands in your regular shell")
        print("  ‚úÖ Python-enhanced console experience")
        print("  ‚úÖ Environment variables auto-configured")
        print("  ‚úÖ Easy access to all MSF tools")
        print("")
        print("  Continuing with direct console...")
        print("="*70 + "\n")
    
    # Show PyNative message
    if not os.environ.get('MSF_QUIET') and '-q' not in sys.argv and '--quiet' not in sys.argv:
        if msf_env_active:
            print("üêç MSF Environment Active - Python Console")
        else:
            print("üêç PyNative Metasploit Framework Console")
            print("(Consider 'source msfrc' for enhanced experience)")
    
    # TODO: Implement full Python console functionality
    # For now, show that we're PyNative and exit gracefully
    print("\nPyNative conversion successful!")
    print("Ruby files have been renamed to .rb extension")
    print("Python files are now the primary executables")
    print("No more Ruby delegation - this is pure Python!")
    
    if not msf_env_active:
        print("\nüí° TIP: For the full MSF experience, try:")
        print("   source msfrc")
        print("   msf_console")


if __name__ == "__main__":
    try:
        main()
    except KeyboardInterrupt:
        print("\nAborting...")
        sys.exit(1)
